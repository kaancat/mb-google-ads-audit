<!DOCTYPE html>
<html lang="da">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="robots" content="noindex, nofollow">
    <title>Google Ads Audit - {{CLIENT_NAME}}</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Plus+Jakarta+Sans:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        // Monday Brew Dark Mode Colors
                        brand: {
                            DEFAULT: '#49444b',
                            light: '#f5f7fd',
                            dark: '#49444B'
                        },
                        accent: '#ff914d',
                        'accent-hover': '#ffa366',
                        ink: '#f5f7fd',
                        'ink-muted': '#a8a4aa',
                        bgdark: '#49444B',
                        surface: {
                            DEFAULT: '#3d393f',
                            elevated: '#524d54'
                        },
                        // Severity colors
                        severity: {
                            critical: '#ef4444',
                            'critical-bg': 'rgba(239, 68, 68, 0.15)',
                            high: '#f97316',
                            'high-bg': 'rgba(249, 115, 22, 0.15)',
                            medium: '#eab308',
                            'medium-bg': 'rgba(234, 179, 8, 0.15)',
                            low: '#22c55e',
                            'low-bg': 'rgba(34, 197, 94, 0.15)'
                        }
                    },
                    fontFamily: {
                        sans: ['Inter', '-apple-system', 'BlinkMacSystemFont', 'Segoe UI', 'sans-serif'],
                        heading: ['Plus Jakarta Sans', 'Inter', '-apple-system', 'sans-serif'],
                    },
                    borderRadius: {
                        'mb': '0.625rem',
                        'mb-lg': '0.875rem',
                        'mb-xl': '1.25rem',
                    },
                    boxShadow: {
                        'mb-sm': '0 2px 8px rgba(0, 0, 0, 0.2)',
                        'mb': '0 4px 16px rgba(0, 0, 0, 0.25)',
                        'mb-lg': '0 12px 32px rgba(0, 0, 0, 0.3)',
                    }
                }
            }
        }
    </script>
    <style>
        [v-cloak] { display: none; }
        .animate-fade-in { animation: fadeIn 0.4s cubic-bezier(0.25, 0.62, 0.32, 1); }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(12px); } to { opacity: 1; transform: translateY(0); } }

        /* Dark glass effect */
        .glass-dark {
            background: rgba(61, 57, 63, 0.9);
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
            border: 1px solid rgba(245, 247, 253, 0.08);
        }

        /* Accent gradient */
        .accent-gradient {
            background: linear-gradient(135deg, #ff914d 0%, #ffb380 100%);
        }

        /* Subtle hover */
        .mb-hover { transition: all 0.28s cubic-bezier(0.25, 0.62, 0.32, 1); }
        .mb-hover:hover { transform: translateY(-2px); }

        /* Dark scrollbar */
        ::-webkit-scrollbar { width: 6px; }
        ::-webkit-scrollbar-track { background: #49444B; }
        ::-webkit-scrollbar-thumb { background: rgba(245, 247, 253, 0.2); border-radius: 3px; }
        ::-webkit-scrollbar-thumb:hover { background: rgba(245, 247, 253, 0.35); }
    </style>
</head>

<body class="bg-bgdark text-ink font-sans h-screen flex overflow-hidden">

    <div id="app" v-cloak class="flex w-full h-full">

        <!-- Sidebar -->
        <aside class="w-64 glass-dark shadow-mb-lg z-10 flex flex-col">
            <div class="p-6 border-b border-ink/10 flex flex-col items-center">
                <img v-if="clientLogo" :src="clientLogo" :alt="clientName" class="h-14 object-contain mb-3 drop-shadow-sm">
                <div v-else class="h-14 flex items-center justify-center text-xl font-heading font-bold text-ink mb-3">{{ clientName }}</div>
                <div class="text-[10px] font-semibold text-accent uppercase tracking-[0.15em]">Google Ads Audit</div>
            </div>

            <nav class="flex-1 p-3 space-y-1 overflow-y-auto">
                <button @click="currentTab = 'summary'"
                    :class="{'bg-accent text-brand-dark shadow-mb': currentTab === 'summary', 'text-ink/70 hover:bg-ink/5 hover:text-ink': currentTab !== 'summary'}"
                    class="w-full text-left px-4 py-3 rounded-mb transition-all duration-200 flex items-center gap-3 font-medium text-sm">
                    <span class="text-lg">üìä</span> Executive Summary
                </button>
                <button @click="currentTab = 'quickwins'"
                    :class="{'bg-accent text-brand-dark shadow-mb': currentTab === 'quickwins', 'text-ink/70 hover:bg-ink/5 hover:text-ink': currentTab !== 'quickwins'}"
                    class="w-full text-left px-4 py-3 rounded-mb transition-all duration-200 flex items-center gap-3 font-medium text-sm">
                    <span class="text-lg">‚ö°</span> Quick Wins
                </button>
                <button @click="currentTab = 'findings'"
                    :class="{'bg-accent text-brand-dark shadow-mb': currentTab === 'findings', 'text-ink/70 hover:bg-ink/5 hover:text-ink': currentTab !== 'findings'}"
                    class="w-full text-left px-4 py-3 rounded-mb transition-all duration-200 flex items-center gap-3 font-medium text-sm">
                    <span class="text-lg">üîç</span> Detailed Findings
                </button>
                <button @click="currentTab = 'actionplan'"
                    :class="{'bg-accent text-brand-dark shadow-mb': currentTab === 'actionplan', 'text-ink/70 hover:bg-ink/5 hover:text-ink': currentTab !== 'actionplan'}"
                    class="w-full text-left px-4 py-3 rounded-mb transition-all duration-200 flex items-center gap-3 font-medium text-sm">
                    <span class="text-lg">üìã</span> Action Plan
                </button>
                <button @click="currentTab = 'appendix'"
                    :class="{'bg-accent text-brand-dark shadow-mb': currentTab === 'appendix', 'text-ink/70 hover:bg-ink/5 hover:text-ink': currentTab !== 'appendix'}"
                    class="w-full text-left px-4 py-3 rounded-mb transition-all duration-200 flex items-center gap-3 font-medium text-sm">
                    <span class="text-lg">üìé</span> Appendix
                </button>
            </nav>

            <div class="p-4 border-t border-ink/10 text-center">
                <div class="text-[10px] text-ink/50 uppercase tracking-wider mb-2">Prepared by</div>
                <img src="https://mondaybrew.com/brand/mondaybrew-logo.svg" alt="Monday Brew" class="h-6 mx-auto opacity-80">
            </div>
        </aside>

        <!-- Main Content -->
        <main class="flex-1 overflow-y-auto bg-bgdark p-8">

            <!-- Summary Tab -->
            <div v-if="currentTab === 'summary'" class="max-w-4xl mx-auto space-y-8 animate-fade-in">
                <header class="mb-8">
                    <div class="flex items-center gap-3 mb-4">
                        <span class="text-[11px] font-semibold text-accent uppercase tracking-[0.15em]">{{ auditPeriod }} Days Analysis</span>
                        <span class="h-0.5 w-8 bg-accent rounded-full"></span>
                    </div>
                    <h1 class="text-3xl font-heading font-bold text-ink mb-3">Google Ads Audit for {{ clientName }}</h1>
                    <p class="text-lg text-ink-muted">Comprehensive analysis with prioritized recommendations.</p>
                </header>

                <!-- Severity Matrix -->
                <div class="grid grid-cols-2 md:grid-cols-4 gap-4 mb-8">
                    <div class="bg-severity-critical-bg border border-severity-critical rounded-mb-lg p-5 text-center mb-hover">
                        <div class="text-4xl font-heading font-bold text-severity-critical">{{ severityCounts.critical }}</div>
                        <div class="text-sm font-semibold text-ink uppercase tracking-wide mt-1">Critical</div>
                    </div>
                    <div class="bg-severity-high-bg border border-severity-high rounded-mb-lg p-5 text-center mb-hover">
                        <div class="text-4xl font-heading font-bold text-severity-high">{{ severityCounts.high }}</div>
                        <div class="text-sm font-semibold text-ink uppercase tracking-wide mt-1">High</div>
                    </div>
                    <div class="bg-severity-medium-bg border border-severity-medium rounded-mb-lg p-5 text-center mb-hover">
                        <div class="text-4xl font-heading font-bold text-severity-medium">{{ severityCounts.medium }}</div>
                        <div class="text-sm font-semibold text-ink uppercase tracking-wide mt-1">Medium</div>
                    </div>
                    <div class="bg-severity-low-bg border border-severity-low rounded-mb-lg p-5 text-center mb-hover">
                        <div class="text-4xl font-heading font-bold text-severity-low">{{ severityCounts.low }}</div>
                        <div class="text-sm font-semibold text-ink uppercase tracking-wide mt-1">Low</div>
                    </div>
                </div>

                <!-- Key Metrics -->
                <div class="grid grid-cols-1 md:grid-cols-4 gap-4 mb-8">
                    <div class="bg-surface/80 backdrop-blur-sm p-5 rounded-mb-lg border border-ink/10 mb-hover">
                        <div class="text-ink-muted font-medium text-sm mb-1">Total Spend</div>
                        <div class="text-2xl font-heading font-bold text-ink">{{ formatCurrency(metrics.totalSpend) }}</div>
                    </div>
                    <div class="bg-surface/80 backdrop-blur-sm p-5 rounded-mb-lg border border-ink/10 mb-hover">
                        <div class="text-ink-muted font-medium text-sm mb-1">Conversions</div>
                        <div class="text-2xl font-heading font-bold text-ink">{{ metrics.conversions }}</div>
                    </div>
                    <div class="bg-surface/80 backdrop-blur-sm p-5 rounded-mb-lg border border-ink/10 mb-hover">
                        <div class="text-ink-muted font-medium text-sm mb-1">Cost / Conversion</div>
                        <div class="text-2xl font-heading font-bold text-ink">{{ formatCurrency(metrics.cpa) }}</div>
                    </div>
                    <div class="bg-surface/80 backdrop-blur-sm p-5 rounded-mb-lg border border-ink/10 mb-hover">
                        <div class="text-ink-muted font-medium text-sm mb-1">Est. Wasted Spend</div>
                        <div class="text-2xl font-heading font-bold text-accent">{{ formatCurrency(metrics.wastedSpend) }}</div>
                    </div>
                </div>

                <!-- Most Critical Finding -->
                <div class="bg-surface/90 backdrop-blur-sm p-6 rounded-mb-lg border border-severity-critical/50 mb-hover">
                    <div class="flex items-start gap-4">
                        <div class="flex-shrink-0 w-12 h-12 bg-severity-critical-bg rounded-full flex items-center justify-center">
                            <span class="text-2xl">üö®</span>
                        </div>
                        <div class="flex-1">
                            <div class="flex items-center gap-2 mb-2">
                                <span class="px-2 py-0.5 text-xs font-bold rounded-full bg-severity-critical text-white uppercase">Critical</span>
                                <h3 class="text-lg font-heading font-bold text-ink">{{ criticalFinding.title }}</h3>
                            </div>
                            <p class="text-ink-muted mb-3">{{ criticalFinding.description }}</p>
                            <div class="inline-block px-3 py-1.5 bg-bgdark rounded-mb text-sm">
                                Estimated impact: <span class="font-bold text-accent">{{ formatCurrency(criticalFinding.impact) }}/month</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Executive Summary Text -->
                <div class="bg-surface/90 backdrop-blur-sm p-6 rounded-mb-lg border border-ink/10">
                    <h3 class="text-xl font-heading font-bold text-ink mb-4 flex items-center gap-2">
                        <span class="w-1 h-6 bg-accent rounded-full"></span>
                        Executive Summary
                    </h3>
                    <div class="text-ink-muted leading-relaxed prose prose-invert max-w-none" v-html="executiveSummary"></div>
                </div>
            </div>

            <!-- Quick Wins Tab -->
            <div v-if="currentTab === 'quickwins'" class="max-w-4xl mx-auto animate-fade-in">
                <header class="mb-8">
                    <div class="flex items-center gap-3 mb-4">
                        <span class="text-[11px] font-semibold text-accent uppercase tracking-[0.15em]">Immediate Impact</span>
                        <span class="h-0.5 w-8 bg-accent rounded-full"></span>
                    </div>
                    <h1 class="text-3xl font-heading font-bold text-ink mb-3">Quick Wins</h1>
                    <p class="text-lg text-ink-muted">Improvements that can be implemented within 1-2 hours.</p>
                </header>

                <div class="space-y-4">
                    <div v-for="(win, index) in quickWins" :key="index"
                        class="bg-surface/90 backdrop-blur-sm p-5 rounded-mb-lg border border-ink/10 mb-hover flex gap-4">
                        <div class="flex-shrink-0 w-10 h-10 accent-gradient rounded-full flex items-center justify-center text-brand-dark font-bold">
                            {{ index + 1 }}
                        </div>
                        <div class="flex-1">
                            <div class="flex items-center gap-2 mb-1">
                                <span :class="getSeverityBadgeClass(win.severity)" class="px-2 py-0.5 text-xs font-bold rounded-full uppercase">{{ win.severity }}</span>
                                <h3 class="font-semibold text-ink">{{ win.title }}</h3>
                            </div>
                            <p class="text-ink-muted text-sm mb-2">{{ win.description }}</p>
                            <div class="text-sm text-ink-muted">
                                Impact: <span class="font-medium text-accent">{{ formatCurrency(win.impact) }}</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Findings Tab -->
            <div v-if="currentTab === 'findings'" class="max-w-5xl mx-auto animate-fade-in">
                <header class="mb-8 flex justify-between items-end">
                    <div>
                        <div class="flex items-center gap-3 mb-4">
                            <span class="text-[11px] font-semibold text-accent uppercase tracking-[0.15em]">Analysis</span>
                            <span class="h-0.5 w-8 bg-accent rounded-full"></span>
                        </div>
                        <h1 class="text-3xl font-heading font-bold text-ink mb-3">Detailed Findings</h1>
                        <p class="text-lg text-ink-muted">All findings organized by category.</p>
                    </div>
                    <div class="bg-surface/90 backdrop-blur-sm px-4 py-2 rounded-mb border border-ink/10 text-sm">
                        <span class="font-bold text-accent">{{ findings.length }}</span> findings total
                    </div>
                </header>

                <!-- Category Filter -->
                <div class="bg-surface/90 backdrop-blur-sm p-4 rounded-mb-lg border border-ink/10 mb-6">
                    <div class="flex flex-wrap gap-2">
                        <button @click="categoryFilter = ''"
                            :class="{'bg-accent text-brand-dark': categoryFilter === '', 'bg-ink/10 text-ink/70 hover:bg-ink/20': categoryFilter !== ''}"
                            class="px-4 py-2 rounded-mb text-sm font-medium transition-colors">
                            All
                        </button>
                        <button v-for="cat in uniqueCategories" :key="cat" @click="categoryFilter = cat"
                            :class="{'bg-accent text-brand-dark': categoryFilter === cat, 'bg-ink/10 text-ink/70 hover:bg-ink/20': categoryFilter !== cat}"
                            class="px-4 py-2 rounded-mb text-sm font-medium transition-colors">
                            {{ cat }}
                        </button>
                    </div>
                </div>

                <!-- Findings List -->
                <div class="space-y-4">
                    <div v-for="finding in filteredFindings" :key="finding.id"
                        class="bg-surface/90 backdrop-blur-sm rounded-mb-lg border border-ink/10 overflow-hidden mb-hover"
                        :class="getSeverityBorderClass(finding.severity)">
                        <div class="p-5">
                            <div class="flex items-start justify-between gap-4 mb-3">
                                <div class="flex items-center gap-2">
                                    <span :class="getSeverityBadgeClass(finding.severity)" class="px-2 py-0.5 text-xs font-bold rounded-full uppercase">{{ finding.severity }}</span>
                                    <span v-if="finding.isQuickWin" class="px-2 py-0.5 text-xs font-bold rounded-full bg-purple-500/20 text-purple-300 uppercase">Quick Win</span>
                                    <span class="text-xs text-ink-muted">{{ finding.category }}</span>
                                </div>
                                <span class="text-sm font-medium text-accent">{{ formatCurrency(finding.impact) }}</span>
                            </div>
                            <h3 class="font-heading font-semibold text-ink text-lg mb-2">{{ finding.title }}</h3>
                            <p class="text-ink-muted text-sm mb-4">{{ finding.description }}</p>
                            <div class="bg-bgdark/50 rounded-mb p-3">
                                <div class="text-xs text-ink-muted uppercase tracking-wide mb-1">Recommendation</div>
                                <p class="text-ink text-sm">{{ finding.recommendation }}</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Action Plan Tab -->
            <div v-if="currentTab === 'actionplan'" class="max-w-4xl mx-auto animate-fade-in">
                <header class="mb-8">
                    <div class="flex items-center gap-3 mb-4">
                        <span class="text-[11px] font-semibold text-accent uppercase tracking-[0.15em]">Roadmap</span>
                        <span class="h-0.5 w-8 bg-accent rounded-full"></span>
                    </div>
                    <h1 class="text-3xl font-heading font-bold text-ink mb-3">Priority Action Plan</h1>
                    <p class="text-lg text-ink-muted">Recommended actions organized by priority.</p>
                </header>

                <!-- P0 - Immediate -->
                <div class="mb-8">
                    <div class="flex items-center gap-3 mb-4">
                        <span class="px-3 py-1 text-sm font-bold rounded-mb bg-severity-critical text-white">P0</span>
                        <span class="font-heading font-semibold text-ink">Immediate (Week 1)</span>
                    </div>
                    <div class="space-y-3">
                        <div v-for="(action, index) in actionPlan.p0" :key="'p0-' + index"
                            class="bg-surface/90 backdrop-blur-sm p-4 rounded-mb-lg border border-ink/10 flex gap-4 mb-hover">
                            <div class="flex-shrink-0 w-8 h-8 bg-severity-critical rounded-full flex items-center justify-center text-white font-bold text-sm">
                                {{ index + 1 }}
                            </div>
                            <div class="flex-1">
                                <div class="font-semibold text-ink mb-1">{{ action.title }}</div>
                                <p class="text-ink-muted text-sm">{{ action.description }}</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- P1 - Short-term -->
                <div class="mb-8">
                    <div class="flex items-center gap-3 mb-4">
                        <span class="px-3 py-1 text-sm font-bold rounded-mb bg-severity-high text-white">P1</span>
                        <span class="font-heading font-semibold text-ink">Short-term (Month 1)</span>
                    </div>
                    <div class="space-y-3">
                        <div v-for="(action, index) in actionPlan.p1" :key="'p1-' + index"
                            class="bg-surface/90 backdrop-blur-sm p-4 rounded-mb-lg border border-ink/10 flex gap-4 mb-hover">
                            <div class="flex-shrink-0 w-8 h-8 bg-severity-high rounded-full flex items-center justify-center text-white font-bold text-sm">
                                {{ index + 1 }}
                            </div>
                            <div class="flex-1">
                                <div class="font-semibold text-ink mb-1">{{ action.title }}</div>
                                <p class="text-ink-muted text-sm">{{ action.description }}</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- P2 - Medium-term -->
                <div class="mb-8">
                    <div class="flex items-center gap-3 mb-4">
                        <span class="px-3 py-1 text-sm font-bold rounded-mb bg-severity-medium text-brand-dark">P2</span>
                        <span class="font-heading font-semibold text-ink">Medium-term (Months 2-3)</span>
                    </div>
                    <div class="space-y-3">
                        <div v-for="(action, index) in actionPlan.p2" :key="'p2-' + index"
                            class="bg-surface/90 backdrop-blur-sm p-4 rounded-mb-lg border border-ink/10 flex gap-4 mb-hover">
                            <div class="flex-shrink-0 w-8 h-8 bg-severity-medium rounded-full flex items-center justify-center text-brand-dark font-bold text-sm">
                                {{ index + 1 }}
                            </div>
                            <div class="flex-1">
                                <div class="font-semibold text-ink mb-1">{{ action.title }}</div>
                                <p class="text-ink-muted text-sm">{{ action.description }}</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Appendix Tab -->
            <div v-if="currentTab === 'appendix'" class="max-w-5xl mx-auto animate-fade-in">
                <header class="mb-8">
                    <div class="flex items-center gap-3 mb-4">
                        <span class="text-[11px] font-semibold text-accent uppercase tracking-[0.15em]">Reference</span>
                        <span class="h-0.5 w-8 bg-accent rounded-full"></span>
                    </div>
                    <h1 class="text-3xl font-heading font-bold text-ink mb-3">Appendix</h1>
                    <p class="text-lg text-ink-muted">Supporting data and technical details.</p>
                </header>

                <!-- Negative Keywords -->
                <div class="bg-surface/90 backdrop-blur-sm p-6 rounded-mb-lg border border-ink/10 mb-6" v-if="appendix.negativeKeywords && appendix.negativeKeywords.length > 0">
                    <h3 class="text-xl font-heading font-bold text-ink mb-4 flex items-center gap-2">
                        <span class="w-1 h-6 bg-severity-critical rounded-full"></span>
                        Recommended Negative Keywords
                    </h3>
                    <div class="flex flex-wrap gap-2">
                        <span v-for="kw in appendix.negativeKeywords" :key="kw"
                            class="inline-flex items-center px-3 py-1.5 rounded-mb text-sm font-medium bg-severity-critical-bg text-severity-critical border border-severity-critical/30">
                            -{{ kw }}
                        </span>
                    </div>
                </div>

                <!-- Keywords to Add -->
                <div class="bg-surface/90 backdrop-blur-sm p-6 rounded-mb-lg border border-ink/10 mb-6" v-if="appendix.keywordsToAdd && appendix.keywordsToAdd.length > 0">
                    <h3 class="text-xl font-heading font-bold text-ink mb-4 flex items-center gap-2">
                        <span class="w-1 h-6 bg-severity-low rounded-full"></span>
                        Recommended Keywords to Add
                    </h3>
                    <div class="flex flex-wrap gap-2">
                        <span v-for="kw in appendix.keywordsToAdd" :key="kw"
                            class="inline-flex items-center px-3 py-1.5 rounded-mb text-sm font-medium bg-severity-low-bg text-severity-low border border-severity-low/30">
                            +{{ kw }}
                        </span>
                    </div>
                </div>

                <!-- Audit Metadata -->
                <div class="bg-surface/90 backdrop-blur-sm p-6 rounded-mb-lg border border-ink/10">
                    <h3 class="text-xl font-heading font-bold text-ink mb-4 flex items-center gap-2">
                        <span class="w-1 h-6 bg-ink-muted rounded-full"></span>
                        Audit Details
                    </h3>
                    <div class="grid grid-cols-2 md:grid-cols-4 gap-4 text-sm">
                        <div>
                            <div class="text-ink-muted mb-1">Audit Date</div>
                            <div class="font-medium text-ink">{{ auditDate }}</div>
                        </div>
                        <div>
                            <div class="text-ink-muted mb-1">Period Analyzed</div>
                            <div class="font-medium text-ink">{{ auditPeriod }} days</div>
                        </div>
                        <div>
                            <div class="text-ink-muted mb-1">Account ID</div>
                            <div class="font-medium text-ink">{{ accountId }}</div>
                        </div>
                        <div>
                            <div class="text-ink-muted mb-1">Total Findings</div>
                            <div class="font-medium text-ink">{{ findings.length }}</div>
                        </div>
                    </div>
                </div>
            </div>

        </main>
    </div>

    <script>
        const { createApp, ref, computed, reactive } = Vue;

        createApp({
            setup() {
                const currentTab = ref('summary');
                const categoryFilter = ref('');

                // --- DATA INJECTION START ---
                const clientName = '{{CLIENT_NAME}}';
                const clientLogo = '{{CLIENT_LOGO}}';
                const auditDate = '{{AUDIT_DATE}}';
                const auditPeriod = '{{AUDIT_PERIOD}}';
                const accountId = '{{ACCOUNT_ID}}';
                const currency = '{{CURRENCY}}';

                const metrics = reactive({
                    totalSpend: {{TOTAL_SPEND}},
                    conversions: {{CONVERSIONS}},
                    cpa: {{CPA}},
                    wastedSpend: {{WASTED_SPEND}}
                });

                const severityCounts = reactive({
                    critical: {{CRITICAL_COUNT}},
                    high: {{HIGH_COUNT}},
                    medium: {{MEDIUM_COUNT}},
                    low: {{LOW_COUNT}}
                });

                const criticalFinding = reactive({
                    title: '{{CRITICAL_FINDING_TITLE}}',
                    description: '{{CRITICAL_FINDING_DESCRIPTION}}',
                    impact: {{CRITICAL_FINDING_IMPACT}}
                });

                const executiveSummary = `{{EXECUTIVE_SUMMARY}}`;

                const quickWins = {{QUICK_WINS_JSON}};
                const findings = {{FINDINGS_JSON}};
                const actionPlan = {{ACTION_PLAN_JSON}};
                const appendix = {{APPENDIX_JSON}};
                // --- DATA INJECTION END ---

                const formatCurrency = (value) => {
                    if (!value && value !== 0) return '-';
                    return new Intl.NumberFormat('da-DK', { style: 'currency', currency: currency || 'DKK', maximumFractionDigits: 0 }).format(value);
                };

                const uniqueCategories = computed(() => {
                    const cats = new Set(findings.map(f => f.category).filter(Boolean));
                    return [...cats].sort();
                });

                const filteredFindings = computed(() => {
                    if (!categoryFilter.value) return findings;
                    return findings.filter(f => f.category === categoryFilter.value);
                });

                const getSeverityBadgeClass = (severity) => {
                    const s = (severity || '').toLowerCase();
                    if (s === 'critical') return 'bg-severity-critical text-white';
                    if (s === 'high') return 'bg-severity-high text-white';
                    if (s === 'medium') return 'bg-severity-medium text-brand-dark';
                    if (s === 'low') return 'bg-severity-low text-brand-dark';
                    return 'bg-ink/20 text-ink';
                };

                const getSeverityBorderClass = (severity) => {
                    const s = (severity || '').toLowerCase();
                    if (s === 'critical') return 'border-l-4 border-l-severity-critical';
                    if (s === 'high') return 'border-l-4 border-l-severity-high';
                    if (s === 'medium') return 'border-l-4 border-l-severity-medium';
                    if (s === 'low') return 'border-l-4 border-l-severity-low';
                    return '';
                };

                return {
                    currentTab,
                    categoryFilter,
                    clientName,
                    clientLogo,
                    auditDate,
                    auditPeriod,
                    accountId,
                    metrics,
                    severityCounts,
                    criticalFinding,
                    executiveSummary,
                    quickWins,
                    findings,
                    filteredFindings,
                    uniqueCategories,
                    actionPlan,
                    appendix,
                    formatCurrency,
                    getSeverityBadgeClass,
                    getSeverityBorderClass
                };
            }
        }).mount('#app');
    </script>
</body>

</html>
